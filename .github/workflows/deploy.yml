name: BE deploy
on: [push]
#  push:
#    branches:
#      - main
jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Build
        run: docker build -f docker/build/Dockerfile -t be-app .
      - name: Deploy
        env:
          AI_CORE_BASE_URL: ${{ vars.ai_core_base_url }}
          AI_CORE_PROMPT_ENDPOINT: ${{ vars.ai_core_prompt_endpoint }}
        run: docker run -e AI_CORE_BASE_URL -e AI_CORE_PROMPT_ENDPOINT be-app


